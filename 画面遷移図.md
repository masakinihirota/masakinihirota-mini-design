@startuml group

!define TRANSACTION CAE7F2

package "masakinihirota-mini 画面遷移図" {
  actor ユーザー

  ユーザー --> (ログイン)
  ユーザー --> (ユーザー登録)

  (ログイン) --> (ホーム、メニュー)
  (ユーザー登録) --> (ホーム、メニュー)
  (漫画作品登録) --> (作品リスト表示)
  (自動マッチング) --> (マッチング結果)
   (マッチング結果) <--> (ホーム、メニュー)
  (グループ作成) --> (グループ詳細)
  (マッチング結果) --> (グループ詳細)
  (ホーム、メニュー) <----> (ルートアカウント)
  (ルートアカウント) --> (ユーザープロフィール作成)
  (ルートアカウント) --> (ユーザープロフィール)
  (ユーザープロフィール作成)--> (ユーザープロフィール)
  (ホーム、メニュー) <--> (ユーザープロフィール)
  (ホーム、メニュー) --> (漫画作品登録)
  (ホーム、メニュー) <--> (作品リスト表示)
  (ユーザープロフィール) --> (自動マッチング)
  (ユーザープロフィール) --> (グループ作成)
  (マッチング結果)-->(グループ作成)
  (グループ詳細)<-->(ホーム、メニュー)

}

@enduml


@startuml
!define TRANSACTION CAE7F2

package "masakinihirota-mini 画面遷移図 with エラーハンドリング" {
  actor ユーザー

  ユーザー --> (ログイン)
  ユーザー --> (ユーザー登録)

  (ログイン) --> (ホーム、メニュー)
  (ユーザー登録) --> (ホーム、メニュー)
  (漫画作品登録) --> (作品リスト表示)
  (自動マッチング) --> (マッチング結果)
  (マッチング結果) <--> (ホーム、メニュー)
  (グループ作成) --> (グループ詳細)
  (マッチング結果) --> (グループ詳細)
  (ホーム、メニュー) <----> (ルートアカウント)
  (ルートアカウント) --> (ユーザープロフィール作成)
  (ルートアカウント) --> (ユーザープロフィール)
  (ユーザープロフィール作成) --> (ユーザープロフィール)
  (ホーム、メニュー) <--> (ユーザープロフィール)
  (ホーム、メニュー) --> (漫画作品登録)
  (ホーム、メニュー) <--> (作品リスト表示)
  (ユーザープロフィール) --> (自動マッチング)
  (ユーザープロフィール) --> (グループ作成)
  (マッチング結果) --> (グループ作成)
  (グループ詳細) <--> (ホーム、メニュー)

  ' エラーハンドリング
  (ログイン) --> (エラーページ) : セッション切れ
  (ユーザー登録) --> (エラーページ) : 入力エラー
  (漫画作品登録) --> (エラーページ) : 入力エラー
  (自動マッチング) --> (エラーページ) : マッチングエラー
  (グループ作成) --> (エラーページ) : 作成エラー

  ' セッション切れ時のリダイレクト
  (エラーページ) --> (ログイン) : セッション再ログイン
}

@enduml
